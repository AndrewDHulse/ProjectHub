{% extends 'base.html' %}
{% block content %}


<h3>{{ project.name }}</h3>

    <nav id="navbar-example3" class="navbar navbar-light bg-light flex-column align-items-stretch p-3">
        <div class="navbar-brand"> Tools </div>
        <nav class="nav nav-pills flex-column">
          <a class="nav-link" href=" {% url 'projects_update' project.id %} ">Update </a>
          <a class="nav-link" href="{% url 'projects_delete' project.id %}">Delete</a>
        </nav>
    </nav>

    
  {% comment %} add this to modal later {% endcomment %}
  <div>
    <form action="{% url 'add_task' project.id %}" method=POST>
      {% csrf_token %}
      {{task_form.as_table}}
      <input type="submit" class="btn" value="submit">
    </form>   
  </div>
 {% comment %} end note {% endcomment %}
{%comment %} 
Remember to render tasks on screen. add code for that
{% endcomment %}

{% comment %}
remember to add the unassoc code
{% endcomment %}
<h4>Team Members</h4>
{% if project.team_members.all %}
<div>
    <ul>
        {% for member in project.team_members.all %}
        <li>{{ member.username }}</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p>No team members assigned to this project.</p>
{% endif %}

<h4>Add Team Members</h4>
{% if members_not_in_team %}
<div>
    <ul>
        {% for team_member in members_not_in_team %}
        <li>
            {{ team_member.username }}
            <form action="{% url 'assoc_member' project.id team_member.id %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn">Add</button>
            </form>
        </li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p>No available team members to add to this project.</p>
{% endif %}



<script>
  const dateEl = document.getElementById('id_date');
  M.Datepicker.init(dateEl, {
    format: 'yyyy-mm-dd',
    defaultDate: new Date(),
    setDefaultDate: true,
    autoClose: true
  });

  const selectEl = document.getElementById('id_meal');
  M.FormSelect.init(selectEl);
</script>

{% endblock %}